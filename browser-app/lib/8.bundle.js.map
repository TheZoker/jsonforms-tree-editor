{"version":3,"sources":["webpack:///../node_modules/@theia/editor/src/browser/editor-command.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-contribution.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-frontend-module.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-keybinding-contexts.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-keybinding.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-manager.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-menu.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-navigation-contribution.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-preferences.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-variable-contribution.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-widget-factory.ts","webpack:///../node_modules/@theia/editor/src/browser/editor-widget.ts","webpack:///../node_modules/@theia/editor/src/browser/editor.ts","webpack:///../node_modules/@theia/editor/src/browser/navigation/navigation-location-service.ts","webpack:///../node_modules/@theia/editor/src/browser/navigation/navigation-location-similarity.ts","webpack:///../node_modules/@theia/editor/src/browser/navigation/navigation-location-updater.ts","webpack:///../node_modules/@theia/editor/src/browser/navigation/navigation-location.ts","webpack:///../node_modules/@theia/editor/src/browser/semantic-highlight/semantic-highlighting-service.ts","webpack:///../node_modules/@theia/languages/src/browser/index.ts","webpack:///../node_modules/@theia/languages/src/browser/semantic-highlighting/semantic-highlighting-feature.ts","webpack:///../node_modules/@theia/languages/src/browser/semantic-highlighting/semantic-highlighting-protocol.ts","webpack:///../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack:///../node_modules/uuid/index.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/v1.js","webpack:///../node_modules/uuid/v4.js"],"names":[],"mappings":"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C;;AAEjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA,UAAU,mBAAO,CAAC,0DAAW;AAC7B,kBAAkB,mBAAO,CAAC,kEAAmB;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;AC5GA,UAAU,mBAAO,CAAC,0DAAW;AAC7B,kBAAkB,mBAAO,CAAC,kEAAmB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA","file":"8.bundle.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { CommandContribution, CommandRegistry, Command } from '@theia/core/lib/common';\nimport URI from '@theia/core/lib/common/uri';\nimport { CommonCommands, PreferenceService, QuickPickItem, QuickPickService, LabelProvider, QuickPickValue } from '@theia/core/lib/browser';\nimport { Languages, Language } from '@theia/languages/lib/browser';\nimport { EditorManager } from './editor-manager';\n\nexport namespace EditorCommands {\n\n    const EDITOR_CATEGORY = 'Editor';\n\n    /**\n     * Show editor references\n     */\n    export const SHOW_REFERENCES: Command = {\n        id: 'textEditor.commands.showReferences'\n    };\n    /**\n     * Change indentation configuration (i.e., indent using tabs / spaces, and how many spaces per tab)\n     */\n    export const CONFIG_INDENTATION: Command = {\n        id: 'textEditor.commands.configIndentation'\n    };\n    export const INDENT_USING_SPACES: Command = {\n        id: 'textEditor.commands.indentUsingSpaces',\n        category: EDITOR_CATEGORY,\n        label: 'Indent Using Spaces'\n    };\n    export const INDENT_USING_TABS: Command = {\n        id: 'textEditor.commands.indentUsingTabs',\n        category: EDITOR_CATEGORY,\n        label: 'Indent Using Tabs'\n    };\n    export const CHANGE_LANGUAGE: Command = {\n        id: 'textEditor.change.language',\n        category: EDITOR_CATEGORY,\n        label: 'Change Language Mode'\n    };\n\n    /**\n     * Command for going back to the last editor navigation location.\n     */\n    export const GO_BACK: Command = {\n        id: 'textEditor.commands.go.back',\n        category: EDITOR_CATEGORY,\n        label: 'Go Back'\n    };\n    /**\n     * Command for going to the forthcoming editor navigation location.\n     */\n    export const GO_FORWARD: Command = {\n        id: 'textEditor.commands.go.forward',\n        category: EDITOR_CATEGORY,\n        label: 'Go Forward'\n    };\n    /**\n     * Command that reveals the last text edit location, if any.\n     */\n    export const GO_LAST_EDIT: Command = {\n        id: 'textEditor.commands.go.lastEdit',\n        category: EDITOR_CATEGORY,\n        label: 'Go to Last Edit Location'\n    };\n}\n\n@injectable()\nexport class EditorCommandContribution implements CommandContribution {\n\n    public static readonly AUTOSAVE_PREFERENCE: string = 'editor.autoSave';\n\n    @inject(PreferenceService)\n    protected readonly preferencesService: PreferenceService;\n\n    @inject(QuickPickService)\n    protected readonly quickPick: QuickPickService;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(Languages)\n    protected readonly languages: Languages;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    registerCommands(registry: CommandRegistry): void {\n        registry.registerCommand(EditorCommands.SHOW_REFERENCES);\n        registry.registerCommand(EditorCommands.CONFIG_INDENTATION);\n        registry.registerCommand(EditorCommands.INDENT_USING_SPACES);\n        registry.registerCommand(EditorCommands.INDENT_USING_TABS);\n        registry.registerCommand(EditorCommands.CHANGE_LANGUAGE, {\n            isEnabled: () => this.canConfigureLanguage(),\n            isVisible: () => this.canConfigureLanguage(),\n            execute: () => this.configureLanguage()\n        });\n\n        registry.registerCommand(EditorCommands.GO_BACK);\n        registry.registerCommand(EditorCommands.GO_FORWARD);\n        registry.registerCommand(EditorCommands.GO_LAST_EDIT);\n\n        registry.registerCommand(CommonCommands.AUTO_SAVE, {\n            isToggled: () => this.isAutoSaveOn(),\n            execute: () => this.toggleAutoSave()\n        });\n    }\n\n    protected canConfigureLanguage(): boolean {\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        return !!editor && !!this.languages.languages;\n    }\n    protected async configureLanguage(): Promise<void> {\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        if (!editor || !this.languages.languages) {\n            return;\n        }\n        const current = editor.document.languageId;\n        const items: QuickPickItem<'autoDetect' | Language>[] = [\n            { label: 'Auto Detect', value: 'autoDetect' },\n            { type: 'separator', label: 'languages (identifier)' },\n            ... (await Promise.all(this.languages.languages.map(\n                language => this.toQuickPickLanguage(language, current)\n            ))).sort((e, e2) => e.label.localeCompare(e2.label))\n        ];\n        const selected = await this.quickPick.show(items, {\n            placeholder: 'Select Language Mode'\n        });\n        if (selected === 'autoDetect') {\n            editor.detectLanguage();\n        } else if (selected) {\n            editor.setLanguage(selected.id);\n        }\n    }\n    protected async toQuickPickLanguage(value: Language, current: string): Promise<QuickPickValue<Language>> {\n        const languageUri = this.toLanguageUri(value);\n        const iconClass = await this.labelProvider.getIcon(languageUri) + ' file-icon';\n        return {\n            value,\n            label: value.name,\n            description: `(${value.id})${current === value.id ? ' - Configured Language' : ''}`,\n            iconClass\n        };\n    }\n    protected toLanguageUri(language: Language): URI {\n        const extension = language.extensions.values().next();\n        if (extension.value) {\n            return new URI('file:///' + extension.value);\n        }\n        const filename = language.filenames.values().next();\n        if (filename.value) {\n            return new URI('file:///' + filename.value);\n        }\n        return new URI('file:///.txt');\n    }\n\n    private isAutoSaveOn(): boolean {\n        const autoSave = this.preferencesService.get(EditorCommandContribution.AUTOSAVE_PREFERENCE);\n        return autoSave === 'on' || autoSave === undefined;\n    }\n    private async toggleAutoSave(): Promise<void> {\n        this.preferencesService.set(EditorCommandContribution.AUTOSAVE_PREFERENCE, this.isAutoSaveOn() ? 'off' : 'on');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorManager } from './editor-manager';\nimport { TextEditor } from './editor';\nimport { injectable, inject } from 'inversify';\nimport { StatusBarAlignment, StatusBar } from '@theia/core/lib/browser/status-bar/status-bar';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { Languages } from '@theia/languages/lib/browser';\nimport { DisposableCollection } from '@theia/core';\nimport { EditorCommands } from './editor-command';\n\n@injectable()\nexport class EditorContribution implements FrontendApplicationContribution {\n\n    @inject(StatusBar) protected readonly statusBar: StatusBar;\n    @inject(EditorManager) protected readonly editorManager: EditorManager;\n    @inject(Languages) protected readonly languages: Languages;\n\n    onStart(): void {\n        this.updateStatusBar();\n        this.editorManager.onCurrentEditorChanged(() => this.updateStatusBar());\n    }\n\n    protected readonly toDisposeOnCurrentEditorChanged = new DisposableCollection();\n    protected updateStatusBar(): void {\n        this.toDisposeOnCurrentEditorChanged.dispose();\n\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        this.updateLanguageStatus(editor);\n        this.setCursorPositionStatus(editor);\n        if (editor) {\n            this.toDisposeOnCurrentEditorChanged.pushAll([\n                editor.onLanguageChanged(() => this.updateLanguageStatus(editor)),\n                editor.onCursorPositionChanged(() => this.setCursorPositionStatus(editor))\n            ]);\n        }\n    }\n\n    protected updateLanguageStatus(editor: TextEditor | undefined): void {\n        if (!editor) {\n            this.statusBar.removeElement('editor-status-language');\n            return;\n        }\n        const language = this.languages.getLanguage && this.languages.getLanguage(editor.document.languageId);\n        const languageName = language ? language.name : '';\n        this.statusBar.setElement('editor-status-language', {\n            text: languageName,\n            alignment: StatusBarAlignment.RIGHT,\n            priority: 1,\n            command: EditorCommands.CHANGE_LANGUAGE.id\n        });\n    }\n\n    protected setCursorPositionStatus(editor: TextEditor | undefined): void {\n        if (!editor) {\n            this.statusBar.removeElement('editor-status-cursor-position');\n            return;\n        }\n        const { cursor } = editor;\n        this.statusBar.setElement('editor-status-cursor-position', {\n            text: `Ln ${cursor.line + 1}, Col ${editor.getVisibleColumn(cursor)}`,\n            alignment: StatusBarAlignment.RIGHT,\n            priority: 100\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { CommandContribution, MenuContribution } from '@theia/core/lib/common';\nimport { OpenHandler, WidgetFactory, FrontendApplicationContribution, KeybindingContext, KeybindingContribution } from '@theia/core/lib/browser';\nimport { VariableContribution } from '@theia/variable-resolver/lib/browser';\nimport { EditorManager } from './editor-manager';\nimport { EditorContribution } from './editor-contribution';\nimport { EditorMenuContribution } from './editor-menu';\nimport { EditorCommandContribution } from './editor-command';\nimport { EditorTextFocusContext, StrictEditorTextFocusContext, DiffEditorTextFocusContext } from './editor-keybinding-contexts';\nimport { EditorKeybindingContribution } from './editor-keybinding';\nimport { bindEditorPreferences } from './editor-preferences';\nimport { EditorWidgetFactory } from './editor-widget-factory';\nimport { EditorNavigationContribution } from './editor-navigation-contribution';\nimport { NavigationLocationUpdater } from './navigation/navigation-location-updater';\nimport { NavigationLocationService } from './navigation/navigation-location-service';\nimport { NavigationLocationSimilarity } from './navigation/navigation-location-similarity';\nimport { EditorVariableContribution } from './editor-variable-contribution';\nimport { SemanticHighlightingService } from './semantic-highlight/semantic-highlighting-service';\n\nexport default new ContainerModule(bind => {\n    bindEditorPreferences(bind);\n\n    bind(WidgetFactory).to(EditorWidgetFactory).inSingletonScope();\n\n    bind(EditorManager).toSelf().inSingletonScope();\n    bind(OpenHandler).toService(EditorManager);\n\n    bind(CommandContribution).to(EditorCommandContribution).inSingletonScope();\n    bind(MenuContribution).to(EditorMenuContribution).inSingletonScope();\n\n    bind(StrictEditorTextFocusContext).toSelf().inSingletonScope();\n    bind(KeybindingContext).toService(StrictEditorTextFocusContext);\n    bind(KeybindingContext).to(EditorTextFocusContext).inSingletonScope();\n    bind(KeybindingContext).to(DiffEditorTextFocusContext).inSingletonScope();\n    bind(KeybindingContribution).to(EditorKeybindingContribution).inSingletonScope();\n\n    bind(EditorContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(EditorContribution);\n\n    bind(EditorNavigationContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(EditorNavigationContribution);\n    bind(NavigationLocationService).toSelf().inSingletonScope();\n    bind(NavigationLocationUpdater).toSelf().inSingletonScope();\n    bind(NavigationLocationSimilarity).toSelf().inSingletonScope();\n\n    bind(VariableContribution).to(EditorVariableContribution).inSingletonScope();\n\n    bind(SemanticHighlightingService).toSelf().inSingletonScope();\n});\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { KeybindingContext } from '@theia/core/lib/browser/keybinding';\nimport { EditorManager } from './editor-manager';\nimport { EditorWidget } from './editor-widget';\nimport { DiffUris } from '@theia/core/lib/browser';\n\nexport namespace EditorKeybindingContexts {\n\n    /**\n     * ID of a keybinding context that is enabled when the active text editor has the focus.\n     */\n    export const editorTextFocus = 'editorTextFocus';\n\n    /**\n     * ID of a keybinding context that is enabled when the active diff editor has the focus.\n     */\n    export const diffEditorTextFocus = 'diffEditorTextFocus';\n\n    /**\n     * Unique identifier of a keybinding context that is enabled if the active editor has the focus but it does not have any overlaying widgets, such as the content assist widget.\n     */\n    export const strictEditorTextFocus = 'strictEditorTextFocus';\n}\n\n@injectable()\nexport class EditorTextFocusContext implements KeybindingContext {\n\n    readonly id: string = EditorKeybindingContexts.editorTextFocus;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    isEnabled(): boolean {\n        return !!this.getEditor();\n    }\n\n    protected getEditor(): EditorWidget | undefined {\n        const widget = this.editorManager.activeEditor;\n        if (widget && this.canHandle(widget)) {\n            return widget;\n        }\n        return undefined;\n    }\n\n    protected canHandle(widget: EditorWidget): boolean {\n        return widget.editor.isFocused();\n    }\n\n}\n\n@injectable()\nexport class DiffEditorTextFocusContext extends EditorTextFocusContext {\n\n    readonly id: string = EditorKeybindingContexts.diffEditorTextFocus;\n\n    protected canHandle(widget: EditorWidget): boolean {\n        return super.canHandle(widget) && DiffUris.isDiffUri(widget.editor.uri);\n    }\n\n}\n\n/**\n * Keybinding context that is enabled when the active text editor has the focus **AND** it does not\n * have any widgets (for example, the content assist widget) overlaying the active editor.\n */\n@injectable()\nexport class StrictEditorTextFocusContext extends EditorTextFocusContext {\n\n    readonly id: string = EditorKeybindingContexts.strictEditorTextFocus;\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { isOSX, isWindows } from '@theia/core/lib/common/os';\nimport { KeybindingContribution, KeybindingRegistry } from '@theia/core/lib/browser/keybinding';\nimport { EditorCommands } from './editor-command';\n\n@injectable()\nexport class EditorKeybindingContribution implements KeybindingContribution {\n\n    registerKeybindings(registry: KeybindingRegistry): void {\n        registry.registerKeybindings(\n            {\n                command: EditorCommands.GO_BACK.id,\n                keybinding: isOSX ? 'ctrl+-' : isWindows ? 'alt+left' : /*isLinux*/ 'ctrl+alt+-'\n            },\n            {\n                command: EditorCommands.GO_FORWARD.id,\n                keybinding: isOSX ? 'ctrl+shift+-' : isWindows ? 'alt+right' : /*isLinux*/ 'ctrl+shift+-'\n            },\n            {\n                command: EditorCommands.GO_LAST_EDIT.id,\n                keybinding: 'ctrl+alt+q'\n            }\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, postConstruct, } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { RecursivePartial, Emitter, Event } from '@theia/core/lib/common';\nimport { WidgetOpenerOptions, NavigatableWidgetOpenHandler } from '@theia/core/lib/browser';\nimport { EditorWidget } from './editor-widget';\nimport { Range, Position } from './editor';\nimport { EditorWidgetFactory } from './editor-widget-factory';\n\nexport interface EditorOpenerOptions extends WidgetOpenerOptions {\n    selection?: RecursivePartial<Range>;\n}\n\n@injectable()\nexport class EditorManager extends NavigatableWidgetOpenHandler<EditorWidget> {\n\n    readonly id = EditorWidgetFactory.ID;\n\n    readonly label = 'Code Editor';\n\n    protected readonly onActiveEditorChangedEmitter = new Emitter<EditorWidget | undefined>();\n    /**\n     * Emit when the active editor is changed.\n     */\n    readonly onActiveEditorChanged: Event<EditorWidget | undefined> = this.onActiveEditorChangedEmitter.event;\n\n    protected readonly onCurrentEditorChangedEmitter = new Emitter<EditorWidget | undefined>();\n    /**\n     * Emit when the current editor is changed.\n     */\n    readonly onCurrentEditorChanged: Event<EditorWidget | undefined> = this.onCurrentEditorChangedEmitter.event;\n\n    @postConstruct()\n    protected init(): void {\n        super.init();\n        this.shell.activeChanged.connect(() => this.updateActiveEditor());\n        this.shell.currentChanged.connect(() => this.updateCurrentEditor());\n        this.onCreated(widget => widget.disposed.connect(() => this.updateCurrentEditor()));\n    }\n\n    protected _activeEditor: EditorWidget | undefined;\n    /**\n     * The active editor.\n     * If there is an active editor (one that has focus), active and current are the same.\n     */\n    get activeEditor(): EditorWidget | undefined {\n        return this._activeEditor;\n    }\n    protected setActiveEditor(active: EditorWidget | undefined): void {\n        if (this._activeEditor !== active) {\n            this._activeEditor = active;\n            this.onActiveEditorChangedEmitter.fire(this._activeEditor);\n        }\n    }\n    protected updateActiveEditor(): void {\n        const widget = this.shell.activeWidget;\n        this.setActiveEditor(widget instanceof EditorWidget ? widget : undefined);\n    }\n\n    protected _currentEditor: EditorWidget | undefined;\n    /**\n     * The most recently activated editor (which might not have the focus anymore, hence it is not active).\n     * If no editor has focus, e.g. when a context menu is shown, the active editor is `undefined`, but current might be the editor that was active before the menu popped up.\n     */\n    get currentEditor(): EditorWidget | undefined {\n        return this._currentEditor;\n    }\n    protected setCurrentEditor(current: EditorWidget | undefined): void {\n        if (this._currentEditor !== current) {\n            this._currentEditor = current;\n            this.onCurrentEditorChangedEmitter.fire(this._currentEditor);\n        }\n    }\n    protected updateCurrentEditor(): void {\n        const widget = this.shell.currentWidget;\n        if (widget instanceof EditorWidget) {\n            this.setCurrentEditor(widget);\n        } else if (!this._currentEditor || !this._currentEditor.isVisible) {\n            this.setCurrentEditor(undefined);\n        }\n    }\n\n    canHandle(uri: URI, options?: WidgetOpenerOptions): number {\n        return 100;\n    }\n\n    async open(uri: URI, options?: EditorOpenerOptions): Promise<EditorWidget> {\n        const editor = await super.open(uri, options);\n        this.revealSelection(editor, options);\n        return editor;\n    }\n\n    protected revealSelection(widget: EditorWidget, input?: EditorOpenerOptions): void {\n        if (input && input.selection) {\n            const editor = widget.editor;\n            const selection = this.getSelection(widget, input.selection);\n            if (Position.is(selection)) {\n                editor.cursor = selection;\n                editor.revealPosition(selection);\n            } else if (Range.is(selection)) {\n                editor.cursor = selection.end;\n                editor.selection = selection;\n                editor.revealRange(selection);\n            }\n        }\n    }\n\n    protected getSelection(widget: EditorWidget, selection: RecursivePartial<Range>): Range | Position | undefined {\n        const { start, end } = selection;\n        const line = start && start.line !== undefined && start.line >= 0 ? start.line : undefined;\n        if (line === undefined) {\n            return undefined;\n        }\n        const character = start && start.character !== undefined && start.character >= 0 ? start.character : widget.editor.document.getLineMaxColumn(line);\n        const endLine = end && end.line !== undefined && end.line >= 0 ? end.line : undefined;\n        if (endLine === undefined) {\n            return { line, character };\n        }\n        const endCharacter = end && end.character !== undefined && end.character >= 0 ? end.character : widget.editor.document.getLineMaxColumn(endLine);\n        return {\n            start: { line, character },\n            end: { line: endLine, character: endCharacter }\n        };\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { MenuContribution, MenuModelRegistry, MenuPath, MAIN_MENU_BAR } from '@theia/core';\nimport { CommonCommands } from '@theia/core/lib/browser';\nimport { EditorCommands } from './editor-command';\n\nexport const EDITOR_CONTEXT_MENU: MenuPath = ['editor_context_menu'];\n\nexport namespace EditorContextMenu {\n    export const UNDO_REDO = [...EDITOR_CONTEXT_MENU, '1_undo'];\n    export const CUT_COPY_PASTE = [...EDITOR_CONTEXT_MENU, '2_cut_copy_paste'];\n    export const NAVIGATION = [...EDITOR_CONTEXT_MENU, 'navigation'];\n}\n\nexport namespace EditorMainMenu {\n\n    /**\n     * The main `Go` menu item.\n     */\n    export const GO = [...MAIN_MENU_BAR, '5_go'];\n\n    /**\n     * Navigation menu group in the `Go` menu.\n     */\n    export const NAVIGATION_GROUP = [...GO, '1_navigation_group'];\n\n}\n\n@injectable()\nexport class EditorMenuContribution implements MenuContribution {\n\n    registerMenus(registry: MenuModelRegistry) {\n        registry.registerMenuAction(EditorContextMenu.UNDO_REDO, {\n            commandId: CommonCommands.UNDO.id\n        });\n        registry.registerMenuAction(EditorContextMenu.UNDO_REDO, {\n            commandId: CommonCommands.REDO.id\n        });\n\n        registry.registerMenuAction(EditorContextMenu.CUT_COPY_PASTE, {\n            commandId: CommonCommands.CUT.id,\n            order: '0'\n        });\n        registry.registerMenuAction(EditorContextMenu.CUT_COPY_PASTE, {\n            commandId: CommonCommands.COPY.id,\n            order: '1'\n        });\n        registry.registerMenuAction(EditorContextMenu.CUT_COPY_PASTE, {\n            commandId: CommonCommands.PASTE.id,\n            order: '2'\n        });\n\n        // Editor navigation. Go > Back and Go > Forward.\n        registry.registerSubmenu(EditorMainMenu.GO, 'Go');\n        registry.registerMenuAction(EditorMainMenu.NAVIGATION_GROUP, {\n            commandId: EditorCommands.GO_BACK.id,\n            label: 'Back'\n        });\n        registry.registerMenuAction(EditorMainMenu.NAVIGATION_GROUP, {\n            commandId: EditorCommands.GO_FORWARD.id,\n            label: 'Forward'\n        });\n        registry.registerMenuAction(EditorMainMenu.NAVIGATION_GROUP, {\n            commandId: EditorCommands.GO_LAST_EDIT.id,\n            label: 'Last Edit Location'\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { StorageService } from '@theia/core/lib/browser/storage-service';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser/frontend-application';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport { EditorCommands } from './editor-command';\nimport { EditorWidget } from './editor-widget';\nimport { EditorManager } from './editor-manager';\nimport { TextEditor, Position, Range, TextDocumentChangeEvent } from './editor';\nimport { NavigationLocation } from './navigation/navigation-location';\nimport { NavigationLocationService } from './navigation/navigation-location-service';\n\n@injectable()\nexport class EditorNavigationContribution implements Disposable, FrontendApplicationContribution {\n\n    private static ID = 'editor-navigation-contribution';\n\n    protected readonly toDispose = new DisposableCollection();\n    protected readonly toDisposePerCurrentEditor = new DisposableCollection();\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    @inject(NavigationLocationService)\n    protected readonly locationStack: NavigationLocationService;\n\n    @inject(StorageService)\n    protected readonly storageService: StorageService;\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.pushAll([\n            // TODO listen on file resource changes, if a file gets deleted, remove the corresponding navigation locations (if any).\n            // This would require introducing the FS dependency in the editor extension.\n            this.editorManager.onCurrentEditorChanged(this.onCurrentEditorChanged.bind(this))\n        ]);\n        this.commandRegistry.registerHandler(EditorCommands.GO_BACK.id, {\n            execute: () => this.locationStack.back(),\n            isEnabled: () => this.locationStack.canGoBack()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.GO_FORWARD.id, {\n            execute: () => this.locationStack.forward(),\n            isEnabled: () => this.locationStack.canGoForward()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.GO_LAST_EDIT.id, {\n            execute: () => this.locationStack.reveal(this.locationStack.lastEditLocation()),\n            isEnabled: () => !!this.locationStack.lastEditLocation()\n        });\n    }\n\n    async onStart(): Promise<void> {\n        await this.restoreState();\n    }\n\n    onStop(): void {\n        this.storeState();\n        this.dispose();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected onCurrentEditorChanged(editorWidget: EditorWidget | undefined): void {\n        this.toDisposePerCurrentEditor.dispose();\n        if (editorWidget) {\n            const { editor } = editorWidget;\n            this.toDisposePerCurrentEditor.pushAll([\n                // Instead of registering an `onCursorPositionChanged` listener, we treat the zero length selection as a cursor position change.\n                // Otherwise we would have two events for a single cursor change interaction.\n                editor.onSelectionChanged(selection => this.onSelectionChanged(editor, selection)),\n                editor.onDocumentContentChanged(event => this.onDocumentContentChanged(editor, event))\n            ]);\n        }\n    }\n\n    protected onCursorPositionChanged(editor: TextEditor, position: Position): void {\n        this.locationStack.register(NavigationLocation.create(editor, position));\n    }\n\n    protected onSelectionChanged(editor: TextEditor, selection: Range): void {\n        if (this.isZeroLengthRange(selection)) {\n            this.onCursorPositionChanged(editor, selection.start);\n        } else {\n            this.locationStack.register(NavigationLocation.create(editor, selection));\n        }\n    }\n\n    protected onDocumentContentChanged(editor: TextEditor, event: TextDocumentChangeEvent): void {\n        if (event.contentChanges.length > 0) {\n            this.locationStack.register(NavigationLocation.create(editor, event.contentChanges[0]));\n        }\n    }\n\n    /**\n     * `true` if the `range` argument has zero length. In other words, the `start` and the `end` positions are the same. Otherwise, `false`.\n     */\n    protected isZeroLengthRange(range: Range): boolean {\n        const { start, end } = range;\n        return start.line === end.line && start.character === end.character;\n    }\n\n    protected async storeState(): Promise<void> {\n        this.storageService.setData(EditorNavigationContribution.ID, {\n            locations: this.locationStack.locations().map(NavigationLocation.toObject)\n        });\n    }\n\n    protected async restoreState(): Promise<void> {\n        const raw: { locations?: ArrayLike<object> } | undefined = await this.storageService.getData(EditorNavigationContribution.ID);\n        if (raw && raw.locations) {\n            const locations: NavigationLocation[] = [];\n            for (let i = 0; i < raw.locations.length; i++) {\n                const location = NavigationLocation.fromObject(raw.locations[i]);\n                if (location) {\n                    locations.push(location);\n                } else {\n                    this.logger.warn('Could not restore the state of the editor navigation history.');\n                    return;\n                }\n            }\n            this.locationStack.register(...locations);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceContribution,\n    PreferenceSchema,\n    PreferenceChangeEvent\n} from '@theia/core/lib/browser/preferences';\nimport { isOSX } from '@theia/core/lib/common/os';\n\nexport const editorPreferenceSchema: PreferenceSchema = {\n    'type': 'object',\n    'properties': {\n        'editor.tabSize': {\n            'type': 'number',\n            'minimum': 1,\n            'default': 4,\n            'description': 'Configure the tab size in the editor.'\n        },\n        'editor.fontSize': {\n            'type': 'number',\n            'default': (isOSX) ? 12 : 14,\n            'description': 'Configure the editor font size.'\n        },\n        'editor.lineNumbers': {\n            'enum': [\n                'on',\n                'off',\n                'relative',\n                'interval'\n            ],\n            'default': 'on',\n            'description': 'Control the rendering of line numbers.'\n        },\n        'editor.renderWhitespace': {\n            'enum': [\n                'none',\n                'boundary',\n                'all'\n            ],\n            'default': 'none',\n            'description': 'Control the rendering of whitespaces in the editor.'\n        },\n        'editor.autoSave': {\n            'enum': [\n                'on',\n                'off'\n            ],\n            'default': 'on',\n            'description': 'Configure whether the editor should be auto saved.'\n        },\n        'editor.autoSaveDelay': {\n            'type': 'number',\n            'default': 500,\n            'description': 'Configure the auto save delay in milliseconds.'\n        },\n        'editor.rulers': {\n            'type': 'array',\n            'default': [],\n            'description': 'Render vertical lines at the specified columns.'\n        },\n        'editor.wordSeparators': {\n            'type': 'string',\n            'default': \"`~!@#$%^&*()-=+[{]}\\\\|;:'\\\",.<>/\",\n            'description': 'A string containing the word separators used when doing word navigation.'\n        },\n        'editor.glyphMargin': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable the rendering of the glyph margin.'\n        },\n        'editor.roundedSelection': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Render the editor selection with rounded borders.'\n        },\n        'editor.minimap.enabled': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable or disable the minimap.'\n        },\n        'editor.minimap.showSlider': {\n            'enum': [\n                'mouseover',\n                'always'\n            ],\n            'default': 'mouseover',\n            'description': 'Controls whether the minimap slider is automatically hidden.'\n        },\n        'editor.minimap.renderCharacters': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Render the actual characters on a line (as opposed to color blocks).'\n        },\n        'editor.minimap.maxColumn': {\n            'type': 'number',\n            'default': 120,\n            'description': 'Limit the width of the minimap to render at most a certain number of columns.'\n        },\n        'editor.minimap.side': {\n            'enum': [\n                'right',\n                'left'\n            ],\n            'default': 'right',\n            'description': 'Control the side of the minimap in editor.'\n        },\n        'editor.overviewRulerLanes': {\n            'type': 'number',\n            'default': 2,\n            'description': 'The number of vertical lanes the overview ruler should render.'\n        },\n        'editor.overviewRulerBorder': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Controls if a border should be drawn around the overview ruler.'\n        },\n        'editor.cursorBlinking': {\n            'enum': [\n                'blink',\n                'smooth',\n                'phase',\n                'expand',\n                'solid'\n            ],\n            'default': 'blink',\n            'description': \"Control the cursor animation style, possible values are 'blink', 'smooth', 'phase', 'expand' and 'solid'.\"\n        },\n        'editor.mouseWheelZoom': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Zoom the font in the editor when using the mouse wheel in combination with holding Ctrl.'\n        },\n        'editor.cursorStyle': {\n            'enum': [\n                'line',\n                'block'\n            ],\n            'default': 'line',\n            'description': \"Control the cursor style, either 'block' or 'line'.\"\n        },\n        'editor.fontLigatures': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable font ligatures.'\n        },\n        'editor.hideCursorInOverviewRuler': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Should the cursor be hidden in the overview ruler.'\n        },\n        'editor.scrollBeyondLastLine': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable that scrolling can go one screen size after the last line.'\n        },\n        'editor.wordWrap': {\n            'enum': [\n                'off',\n                'on',\n                'wordWrapColumn',\n                'bounded'\n            ],\n            'default': 'off',\n            'description': 'Control the wrapping of the editor.'\n        },\n        'editor.wordWrapColumn': {\n            'type': 'number',\n            'default': 80,\n            'description': 'Control the wrapping of the editor.'\n        },\n        'editor.wrappingIndent': {\n            'enum': [\n                'same',\n                'indent',\n                'deepIndent',\n                'none'\n            ],\n            'default': 'same',\n            'description': 'Control indentation of wrapped lines.'\n        },\n        'editor.links': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable detecting links and making them clickable.'\n        },\n        'editor.mouseWheelScrollSensitivity': {\n            'type': 'number',\n            'default': 1,\n            'description': 'A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.'\n        },\n        'editor.multiCursorModifier': {\n            'enum': [\n                'alt',\n                'ctrlCmd'\n            ],\n            'default': 'alt',\n            'description': 'The modifier to be used to add multiple cursors with the mouse.'\n        },\n        'editor.accessibilitySupport': {\n            'enum': [\n                'auto',\n                'on',\n                'off'\n            ],\n            'default': 'auto',\n            'description': \"Configure the editor's accessibility support.\"\n        },\n        'editor.quickSuggestions': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable quick suggestions (shadow suggestions).'\n        },\n        'editor.quickSuggestionsDelay': {\n            'type': 'number',\n            'default': 500,\n            'description': 'Quick suggestions show delay (in ms).'\n        },\n        'editor.parameterHints': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enables parameter hints.'\n        },\n        'editor.autoClosingBrackets': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable auto closing brackets.'\n        },\n        'editor.autoIndent': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable auto indentation adjustment.'\n        },\n        'editor.formatOnType': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable format on type.'\n        },\n        'editor.formatOnPaste': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable format on paste.'\n        },\n        'editor.dragAndDrop': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Controls if the editor should allow to move selections via drag and drop.'\n        },\n        'editor.suggestOnTriggerCharacters': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable the suggestion box to pop-up on trigger characters.'\n        },\n        'editor.acceptSuggestionOnEnter': {\n            'enum': [\n                'on',\n                'smart',\n                'off'\n            ],\n            'default': 'on',\n            'description': 'Accept suggestions on ENTER.'\n        },\n        'editor.acceptSuggestionOnCommitCharacter': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Accept suggestions on provider defined characters.'\n        },\n        'editor.snippetSuggestions': {\n            'enum': [\n                'inline',\n                'top',\n                'bottom',\n                'none'\n            ],\n            'default': 'inline',\n            'description': 'Enable snippet suggestions.'\n        },\n        'editor.emptySelectionClipboard': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Copying without a selection copies the current line.'\n        },\n        'editor.wordBasedSuggestions': {\n            'type': 'boolean',\n            'default': true,\n            'description': \"Enable word based suggestions. Defaults to 'true'.\"\n        },\n        'editor.selectionHighlight': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable selection highlight.'\n        },\n        'editor.occurrencesHighlight': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable semantic occurrences highlight.'\n        },\n        'editor.codeLens': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Show code lens.'\n        },\n        'editor.folding': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable code folding.'\n        },\n        'editor.foldingStrategy': {\n            'enum': [\n                'auto',\n                'indentation'\n            ],\n            'default': 'auto',\n            'description': 'Selects the folding strategy.'\n                + '\\'auto\\' uses the strategies contributed for the current document, \\'indentation\\' uses the indentation based folding strategy. '\n        },\n        'editor.showFoldingControls': {\n            'enum': [\n                'mouseover',\n                'always'\n            ],\n            'default': 'mouseover',\n            'description': 'Controls whether the fold actions in the gutter stay always visible or hide unless the mouse is over the gutter.'\n        },\n        'editor.matchBrackets': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable highlighting of matching brackets.'\n        },\n        'editor.renderControlCharacters': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable rendering of control characters.'\n        },\n        'editor.renderIndentGuides': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable rendering of indent guides.'\n        },\n        'editor.renderLineHighlight': {\n            'enum': [\n                'all',\n                'gutter',\n                'line',\n                'none'\n            ],\n            'default': 'all',\n            'description': 'Enable rendering of current line highlight.'\n        },\n        'editor.useTabStops': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Inserting and deleting whitespace follows tab stops.'\n        },\n        'editor.insertSpaces': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Using whitespaces to replace tabs when tabbing.'\n        },\n        'editor.colorDecorators': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable inline color decorators and color picker rendering.'\n        },\n        'editor.highlightActiveIndentGuide': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Enable highlighting of the active indent guide.'\n        },\n        'editor.iconsInSuggestions': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Render icons in suggestions box.'\n        },\n        'editor.showUnused': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Controls fading out of unused variables.',\n        },\n        'editor.scrollBeyondLastColumn': {\n            'type': 'number',\n            'default': 5,\n            'description': 'Enable that scrolling can go beyond the last column by a number of columns.'\n        },\n        'editor.suggestSelection': {\n            'enum': [\n                'first',\n                'recentlyUsed',\n                'recentlyUsedByPrefix'\n            ],\n            'default': 'first',\n            'description': 'The history mode for suggestions'\n        },\n        'editor.fontWeight': {\n            'enum': [\n                'normal',\n                'bold',\n                'bolder',\n                'lighter',\n                'initial',\n                'inherit',\n                '100',\n                '200',\n                '300',\n                '400',\n                '500',\n                '600',\n                '700',\n                '800',\n                '900'\n            ],\n            'default': 'normal',\n            'description': 'Controls the editor\\'s font weight.'\n        },\n        'diffEditor.renderSideBySide': {\n            'type': 'boolean',\n            'description': 'Render the differences in two side-by-side editors.',\n            'default': true\n        },\n        'diffEditor.ignoreTrimWhitespace': {\n            'type': 'boolean',\n            'description': 'Compute the diff by ignoring leading/trailing whitespace.',\n            'default': true\n        },\n        'diffEditor.renderIndicators': {\n            'type': 'boolean',\n            'description': 'Render +/- indicators for added/deleted changes.',\n            'default': true\n        },\n        'diffEditor.followsCaret': {\n            'type': 'boolean',\n            'description': 'Resets the navigator state when the user selects something in the editor.',\n            'default': true\n        },\n        'diffEditor.ignoreCharChanges': {\n            'type': 'boolean',\n            'description': 'Jump from line to line.',\n            'default': true\n        },\n        'diffEditor.alwaysRevealFirst': {\n            'type': 'boolean',\n            'description': 'Reveal first change.',\n            'default': true\n        }\n    }\n};\n\nexport interface EditorConfiguration {\n    'editor.tabSize': number\n    'editor.fontSize': number\n    'editor.fontWeight'?: 'normal' | 'bold' | 'bolder' | 'lighter' | 'initial'\n    | 'inherit' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900'\n    'editor.autoSave': 'on' | 'off'\n    'editor.autoSaveDelay': number\n    'editor.lineNumbers'?: 'on' | 'off'\n    'editor.renderWhitespace'?: 'none' | 'boundary' | 'all'\n    'editor.rulers'?: number[]\n    'editor.wordSeparators'?: string\n    'editor.glyphMargin'?: boolean\n    'editor.roundedSelection'?: boolean\n    'editor.minimap.enabled'?: boolean\n    'editor.minimap.showSlider'?: 'always' | 'mouseover'\n    'editor.minimap.renderCharacters'?: boolean\n    'editor.minimap.maxColumn'?: number\n    'editor.minimap.side'?: 'right' | 'left'\n    'editor.overviewRulerLanes'?: number\n    'editor.overviewRulerBorder'?: boolean\n    'editor.cursorBlinking'?: 'blink' | 'smooth' | 'phase' | 'expand' | 'solid'\n    'editor.mouseWheelZoom'?: boolean\n    'editor.cursorStyle'?: 'line' | 'block'\n    'editor.fontLigatures'?: boolean\n    'editor.hideCursorInOverviewRuler'?: boolean\n    'editor.scrollBeyondLastLine'?: boolean\n    'editor.scrollBeyondLastColumn'?: number\n    'editor.wordWrap'?: 'off' | 'on' | 'wordWrapColumn' | 'bounded'\n    'editor.wordWrapColumn'?: number\n    'editor.wrappingIndent'?: 'none' | 'same' | 'indent' | 'deepIndent'\n    'editor.links'?: boolean\n    'editor.mouseWheelScrollSensitivity'?: number\n    'editor.multiCursorModifier'?: 'ctrlCmd' | 'alt'\n    'editor.accessibilitySupport'?: 'auto' | 'off' | 'on'\n    'editor.quickSuggestions'?: boolean\n    'editor.quickSuggestionsDelay'?: number\n    'editor.suggestSelection'?: 'first' | 'recentlyUsed' | 'recentlyUsedByPrefix'\n    'editor.iconsInSuggestions'?: boolean\n    'editor.parameterHints'?: boolean\n    'editor.autoClosingBrackets'?: boolean\n    'editor.autoIndent'?: boolean\n    'editor.formatOnType'?: boolean\n    'editor.formatOnPaste'?: boolean\n    'editor.dragAndDrop'?: boolean\n    'editor.suggestOnTriggerCharacters'?: boolean\n    'editor.acceptSuggestionOnEnter'?: 'on' | 'smart' | 'off'\n    'editor.acceptSuggestionOnCommitCharacter'?: boolean\n    'editor.snippetSuggestions'?: 'top' | 'bottom' | 'inline' | 'none'\n    'editor.emptySelectionClipboard'?: boolean\n    'editor.wordBasedSuggestions'?: boolean\n    'editor.selectionHighlight'?: boolean\n    'editor.occurrencesHighlight'?: boolean\n    'editor.codeLens'?: boolean\n    'editor.folding'?: boolean\n    'editor.foldingStrategy'?: 'auto' | 'indentation'\n    'editor.showFoldingControls'?: 'always' | 'mouseover'\n    'editor.matchBrackets'?: boolean\n    'editor.renderControlCharacters'?: boolean\n    'editor.renderIndentGuides'?: boolean\n    'editor.highlightActiveIndentGuide'?: boolean\n    'editor.renderLineHighlight'?: 'none' | 'gutter' | 'line' | 'all'\n    'editor.useTabStops'?: boolean\n    'editor.insertSpaces': boolean\n    'editor.colorDecorators'?: boolean\n    'editor.showUnused'?: boolean\n    'diffEditor.renderSideBySide'?: boolean\n    'diffEditor.ignoreTrimWhitespace'?: boolean\n    'diffEditor.renderIndicators'?: boolean\n    'diffEditor.followsCaret'?: boolean\n    'diffEditor.ignoreCharChanges'?: boolean\n    'diffEditor.alwaysRevealFirst'?: boolean\n}\n\nexport type EditorPreferenceChange = PreferenceChangeEvent<EditorConfiguration>;\n\nexport const EditorPreferences = Symbol('EditorPreferences');\nexport type EditorPreferences = PreferenceProxy<EditorConfiguration>;\n\nexport function createEditorPreferences(preferences: PreferenceService): EditorPreferences {\n    return createPreferenceProxy(preferences, editorPreferenceSchema);\n}\n\nexport function bindEditorPreferences(bind: interfaces.Bind): void {\n    bind(EditorPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createEditorPreferences(preferences);\n    }).inSingletonScope();\n\n    bind(PreferenceContribution).toConstantValue({ schema: editorPreferenceSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { VariableRegistry, VariableContribution } from '@theia/variable-resolver/lib/browser';\nimport { TextEditor } from './editor';\nimport { EditorManager } from './editor-manager';\n\n@injectable()\nexport class EditorVariableContribution implements VariableContribution {\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    registerVariables(variables: VariableRegistry): void {\n        variables.registerVariable({\n            name: 'lineNumber',\n            description: 'The current line number in the currently opened file',\n            resolve: () => {\n                const editor = this.getCurrentEditor();\n                return editor ? `${editor.cursor.line + 1}` : undefined;\n            }\n        });\n    }\n\n    protected getCurrentEditor(): TextEditor | undefined {\n        const currentEditor = this.editorManager.currentEditor;\n        if (!currentEditor) {\n            return undefined;\n        }\n        return currentEditor.editor;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { SelectionService } from '@theia/core/lib/common';\nimport { NavigatableWidgetOptions, WidgetFactory, LabelProvider } from '@theia/core/lib/browser';\nimport { EditorWidget } from './editor-widget';\nimport { TextEditorProvider } from './editor';\n\n@injectable()\nexport class EditorWidgetFactory implements WidgetFactory {\n\n    static ID = 'code-editor-opener';\n\n    readonly id = EditorWidgetFactory.ID;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(TextEditorProvider)\n    protected readonly editorProvider: TextEditorProvider;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    createWidget(options: NavigatableWidgetOptions): Promise<EditorWidget> {\n        const uri = new URI(options.uri);\n        return this.createEditor(uri);\n    }\n\n    protected async createEditor(uri: URI): Promise<EditorWidget> {\n        const icon = await this.labelProvider.getIcon(uri);\n        return this.editorProvider(uri).then(textEditor => {\n            const newEditor = new EditorWidget(textEditor, this.selectionService);\n            newEditor.id = this.id + ':' + uri.toString();\n            newEditor.title.closable = true;\n            newEditor.title.label = this.labelProvider.getName(uri);\n            newEditor.title.iconClass = icon + ' file-icon';\n            newEditor.title.caption = this.labelProvider.getLongName(uri);\n            return newEditor;\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SelectionService } from '@theia/core/lib/common';\nimport { Widget, BaseWidget, Message, Saveable, SaveableSource, Navigatable, StatefulWidget, DiffUris } from '@theia/core/lib/browser';\nimport URI from '@theia/core/lib/common/uri';\nimport { TextEditor } from './editor';\n\nexport class EditorWidget extends BaseWidget implements SaveableSource, Navigatable, StatefulWidget {\n\n    constructor(\n        readonly editor: TextEditor,\n        protected readonly selectionService: SelectionService\n    ) {\n        super(editor);\n        this.toDispose.push(this.editor);\n        this.toDispose.push(this.editor.onSelectionChanged(() => {\n            if (this.editor.isFocused()) {\n                this.selectionService.selection = this.editor;\n            }\n        }));\n    }\n\n    get saveable(): Saveable {\n        return this.editor.document;\n    }\n\n    getResourceUri(): URI | undefined {\n        const { uri } = this.editor;\n        if (DiffUris.isDiffUri(uri)) {\n            return DiffUris.decode(uri)[0];\n        }\n        return uri;\n    }\n    createMoveToUri(resourceUri: URI): URI | undefined {\n        const { uri } = this.editor;\n        if (DiffUris.isDiffUri(uri)) {\n            const [left, right] = DiffUris.decode(uri);\n            return DiffUris.encode(left.withPath(resourceUri.path), right.withPath(resourceUri.path));\n        }\n        return uri.withPath(resourceUri.path);\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.editor.focus();\n        this.selectionService.selection = this.editor;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        if (this.isVisible) {\n            this.editor.refresh();\n        }\n    }\n\n    protected onAfterShow(msg: Message): void {\n        super.onAfterShow(msg);\n        this.editor.refresh();\n    }\n\n    protected onResize(msg: Widget.ResizeMessage): void {\n        if (msg.width < 0 || msg.height < 0) {\n            this.editor.resizeToFit();\n        } else {\n            this.editor.setSize(msg);\n        }\n    }\n\n    storeState(): object {\n        return this.editor.storeViewState();\n    }\n\n    restoreState(oldState: object): void {\n        this.editor.restoreViewState(oldState);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Position, Range } from 'vscode-languageserver-types';\nimport * as lsp from 'vscode-languageserver-types';\nimport URI from '@theia/core/lib/common/uri';\nimport { Event, Disposable } from '@theia/core/lib/common';\nimport { Saveable } from '@theia/core/lib/browser';\nimport { EditorDecoration } from './decorations';\n\nexport {\n    Position, Range\n};\n\nexport const TextEditorProvider = Symbol('TextEditorProvider');\nexport type TextEditorProvider = (uri: URI) => Promise<TextEditor>;\n\nexport interface TextEditorDocument extends lsp.TextDocument, Saveable, Disposable {\n    getLineContent(lineNumber: number): string;\n    getLineMaxColumn(lineNumber: number): number;\n}\n\nexport interface TextDocumentContentChangeDelta extends lsp.TextDocumentContentChangeEvent {\n    readonly range: Range;\n    readonly rangeLength: number;\n}\n\nexport namespace TextDocumentContentChangeDelta {\n\n    // tslint:disable-next-line:no-any\n    export function is(arg: any): arg is TextDocumentContentChangeDelta {\n        return !!arg && typeof arg['text'] === 'string' && typeof arg['rangeLength'] === 'number' && Range.is(arg['range']);\n    }\n\n}\n\nexport interface TextDocumentChangeEvent {\n    readonly document: TextEditorDocument;\n    readonly contentChanges: TextDocumentContentChangeDelta[];\n}\n\n/**\n * Type of hit element with the mouse in the editor.\n * Copied from monaco editor.\n */\nexport enum MouseTargetType {\n    /**\n     * Mouse is on top of an unknown element.\n     */\n    UNKNOWN = 0,\n    /**\n     * Mouse is on top of the textarea used for input.\n     */\n    TEXTAREA = 1,\n    /**\n     * Mouse is on top of the glyph margin\n     */\n    GUTTER_GLYPH_MARGIN = 2,\n    /**\n     * Mouse is on top of the line numbers\n     */\n    GUTTER_LINE_NUMBERS = 3,\n    /**\n     * Mouse is on top of the line decorations\n     */\n    GUTTER_LINE_DECORATIONS = 4,\n    /**\n     * Mouse is on top of the whitespace left in the gutter by a view zone.\n     */\n    GUTTER_VIEW_ZONE = 5,\n    /**\n     * Mouse is on top of text in the content.\n     */\n    CONTENT_TEXT = 6,\n    /**\n     * Mouse is on top of empty space in the content (e.g. after line text or below last line)\n     */\n    CONTENT_EMPTY = 7,\n    /**\n     * Mouse is on top of a view zone in the content.\n     */\n    CONTENT_VIEW_ZONE = 8,\n    /**\n     * Mouse is on top of a content widget.\n     */\n    CONTENT_WIDGET = 9,\n    /**\n     * Mouse is on top of the decorations overview ruler.\n     */\n    OVERVIEW_RULER = 10,\n    /**\n     * Mouse is on top of a scrollbar.\n     */\n    SCROLLBAR = 11,\n    /**\n     * Mouse is on top of an overlay widget.\n     */\n    OVERLAY_WIDGET = 12,\n    /**\n     * Mouse is outside of the editor.\n     */\n    OUTSIDE_EDITOR = 13,\n}\n\nexport interface MouseTarget {\n    /**\n     * The target element\n     */\n    readonly element: Element;\n    /**\n     * The target type\n     */\n    readonly type: MouseTargetType;\n    /**\n     * The 'approximate' editor position\n     */\n    readonly position?: Position;\n    /**\n     * Desired mouse column (e.g. when position.column gets clamped to text length -- clicking after text on a line).\n     */\n    readonly mouseColumn: number;\n    /**\n     * The 'approximate' editor range\n     */\n    readonly range?: Range;\n    /**\n     * Some extra detail.\n     */\n    // tslint:disable-next-line:no-any\n    readonly detail: any;\n}\n\nexport interface EditorMouseEvent {\n    readonly event: MouseEvent;\n    readonly target: MouseTarget;\n}\n\nexport interface TextEditor extends Disposable, TextEditorSelection {\n    readonly node: HTMLElement;\n\n    readonly uri: URI;\n    readonly document: TextEditorDocument;\n    readonly onDocumentContentChanged: Event<TextDocumentChangeEvent>;\n\n    cursor: Position;\n    readonly onCursorPositionChanged: Event<Position>;\n\n    selection: Range;\n    readonly onSelectionChanged: Event<Range>;\n\n    focus(): void;\n    blur(): void;\n    isFocused(): boolean;\n    readonly onFocusChanged: Event<boolean>;\n\n    readonly onMouseDown: Event<EditorMouseEvent>;\n\n    revealPosition(position: Position, options?: RevealPositionOptions): void;\n    revealRange(range: Range, options?: RevealRangeOptions): void;\n\n    /**\n     * Rerender the editor.\n     */\n    refresh(): void;\n    /**\n     * Resize the editor to fit its node.\n     */\n    resizeToFit(): void;\n    setSize(size: Dimension): void;\n\n    /**\n     * Applies given new decorations, and removes old decorations identified by ids.\n     *\n     * @returns identifiers of applied decorations, which can be removed in next call.\n     */\n    deltaDecorations(params: DeltaDecorationParams): string[];\n\n    /**\n     * Gets all the decorations for the lines between `startLineNumber` and `endLineNumber` as an array.\n     * @param startLineNumber The start line number.\n     * @param endLineNumber The end line number.\n     * @return An array with the decorations.\n     */\n    getLinesDecorations(startLineNumber: number, endLineNumber: number): EditorDecoration[];\n\n    getVisibleColumn(position: Position): number;\n\n    /**\n     * Replaces the text of source given in ReplaceTextParams.\n     * @param params: ReplaceTextParams\n     */\n    replaceText(params: ReplaceTextParams): Promise<boolean>;\n\n    /**\n     * Execute edits on the editor.\n     * @param edits: edits created with `lsp.TextEdit.replace`, `lsp.TextEdit.insert`, `lsp.TextEdit.del`\n     */\n    executeEdits(edits: lsp.TextEdit[]): boolean;\n\n    storeViewState(): object;\n    restoreViewState(state: object): void;\n\n    detectLanguage(): void;\n    setLanguage(languageId: string): void;\n    readonly onLanguageChanged: Event<string>;\n}\n\nexport interface Dimension {\n    width: number;\n    height: number;\n}\n\nexport interface TextEditorSelection {\n    uri: URI\n    cursor?: Position\n    selection?: Range\n}\n\nexport interface RevealPositionOptions {\n    vertical: 'auto' | 'center' | 'centerIfOutsideViewport';\n    horizontal?: boolean;\n}\n\nexport interface RevealRangeOptions {\n    at: 'auto' | 'center' | 'top' | 'centerIfOutsideViewport';\n}\n\nexport interface DeltaDecorationParams {\n    oldDecorations: string[];\n    newDecorations: EditorDecoration[];\n}\n\nexport interface ReplaceTextParams {\n    /**\n     * the source to edit\n     */\n    source: string;\n    /**\n     * the replace operations\n     */\n    replaceOperations: ReplaceOperation[];\n}\n\nexport interface ReplaceOperation {\n    /**\n     * the position that shall be replaced\n     */\n    range: Range;\n    /**\n     * the text to replace with\n     */\n    text: string;\n}\n\nexport namespace TextEditorSelection {\n    // tslint:disable-next-line:no-any\n    export function is(e: any): e is TextEditorSelection {\n        return e && e['uri'] instanceof URI;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { OpenerService, OpenerOptions, open } from '@theia/core/lib/browser/opener-service';\nimport { EditorOpenerOptions } from '../editor-manager';\nimport { NavigationLocationUpdater } from './navigation-location-updater';\nimport { NavigationLocationSimilarity } from './navigation-location-similarity';\nimport { NavigationLocation, Range, ContentChangeLocation } from './navigation-location';\n\n/**\n * The navigation location service. Also, stores and manages navigation locations.\n */\n@injectable()\nexport class NavigationLocationService {\n\n    private static MAX_STACK_ITEMS = 30;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(OpenerService)\n    protected readonly openerService: OpenerService;\n\n    @inject(NavigationLocationUpdater)\n    protected readonly updater: NavigationLocationUpdater;\n\n    @inject(NavigationLocationSimilarity)\n    protected readonly similarity: NavigationLocationSimilarity;\n\n    protected pointer = -1;\n    protected stack: NavigationLocation[] = [];\n    protected canRegister = true;\n    protected _lastEditLocation: ContentChangeLocation | undefined;\n\n    /**\n     * Registers the give locations into the service.\n     */\n    register(...locations: NavigationLocation[]): void {\n        if (this.canRegister) {\n            const max = this.maxStackItems();\n            [...locations].forEach(location => {\n                if (ContentChangeLocation.is(location)) {\n                    this._lastEditLocation = location;\n                }\n                const current = this.currentLocation();\n                this.debug(`Registering new location: ${NavigationLocation.toString(location)}.`);\n                if (!this.isSimilar(current, location)) {\n                    this.debug('Before location registration.');\n                    this.debug(this.stackDump);\n                    // Just like in VSCode; if we are not at the end of stack, we remove anything after.\n                    if (this.stack.length > this.pointer + 1) {\n                        this.debug(`Discarding all locations after ${this.pointer}.`);\n                        this.stack = this.stack.slice(0, this.pointer + 1);\n                    }\n                    this.stack.push(location);\n                    this.pointer = this.stack.length - 1;\n                    if (this.stack.length > max) {\n                        this.debug('Trimming exceeding locations.');\n                        this.stack.shift();\n                        this.pointer--;\n                    }\n                    this.debug('Updating preceding navigation locations.');\n                    for (let i = this.stack.length - 1; i >= 0; i--) {\n                        const candidate = this.stack[i];\n                        const update = this.updater.affects(candidate, location);\n                        if (update === undefined) {\n                            this.debug(`Erasing obsolete location: ${NavigationLocation.toString(candidate)}.`);\n                            this.stack.splice(i, 1);\n                            this.pointer--;\n                        } else if (typeof update !== 'boolean') {\n                            this.debug(`Updating location at index: ${i} => ${NavigationLocation.toString(candidate)}.`);\n                            this.stack[i] = update;\n                        }\n                    }\n                    this.debug('After location registration.');\n                    this.debug(this.stackDump);\n                } else {\n                    if (current) {\n                        this.debug(`The new location ${NavigationLocation.toString(location)} is similar to the current one: ${NavigationLocation.toString(current)}. Aborting.`);\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Navigates one back. Returns with the previous location, or `undefined` if it could not navigate back.\n     */\n    async back(): Promise<NavigationLocation | undefined> {\n        this.debug('Navigating back.');\n        if (this.canGoBack()) {\n            this.pointer--;\n            await this.reveal();\n            this.debug(this.stackDump);\n            return this.currentLocation();\n        }\n        this.debug('Cannot navigate back.');\n        return undefined;\n    }\n\n    /**\n     * Navigates one forward. Returns with the next location, or `undefined` if it could not go forward.\n     */\n    async forward(): Promise<NavigationLocation | undefined> {\n        this.debug('Navigating forward.');\n        if (this.canGoForward()) {\n            this.pointer++;\n            await this.reveal();\n            this.debug(this.stackDump);\n            return this.currentLocation();\n        }\n        this.debug('Cannot navigate forward.');\n        return undefined;\n    }\n\n    /**\n     * Checks whether the service can go [`back`](#back).\n     */\n    canGoBack(): boolean {\n        return this.pointer >= 1;\n    }\n\n    /**\n     * Checks whether the service can go [`forward`](#forward).\n     */\n    canGoForward(): boolean {\n        return this.pointer >= 0 && this.pointer !== this.stack.length - 1;\n    }\n\n    /**\n     * Returns with all known navigation locations in chronological order.\n     */\n    locations(): ReadonlyArray<NavigationLocation> {\n        return this.stack;\n    }\n\n    /**\n     * Returns with the current location.\n     */\n    currentLocation(): NavigationLocation | undefined {\n        return this.stack[this.pointer];\n    }\n\n    /**\n     * Returns with the location of the most recent edition if any. If there were no modifications,\n     * returns `undefined`.\n     */\n    lastEditLocation(): NavigationLocation | undefined {\n        return this._lastEditLocation;\n    }\n\n    /**\n     * Reveals the location argument. If not given, reveals the `current location`. Does nothing, if the argument is `undefined`.\n     */\n    async reveal(location: NavigationLocation | undefined = this.currentLocation()): Promise<void> {\n        if (location === undefined) {\n            return;\n        }\n        try {\n            this.canRegister = false;\n            const { uri } = location;\n            const options = this.toOpenerOptions(location);\n            await open(this.openerService, uri, options);\n        } catch (e) {\n            this.logger.error(`Error occurred while revealing location: ${NavigationLocation.toString(location)}.`, e);\n        } finally {\n            this.canRegister = true;\n        }\n    }\n\n    /**\n     * `true` if the two locations are similar.\n     */\n    protected isSimilar(left: NavigationLocation | undefined, right: NavigationLocation | undefined): boolean {\n        return this.similarity.similar(left, right);\n    }\n\n    /**\n     * Returns with the number of navigation locations that the application can handle and manage.\n     * When the number of locations exceeds this number, old locations will be erased.\n     */\n    protected maxStackItems(): number {\n        return NavigationLocationService.MAX_STACK_ITEMS;\n    }\n\n    /**\n     * Returns with the opener option for the location argument.\n     */\n    protected toOpenerOptions(location: NavigationLocation): OpenerOptions {\n        let { start } = NavigationLocation.range(location);\n        // Here, the `start` and represents the previous state that has been updated with the `text`.\n        // So we calculate the range by appending the `text` length to the `start`.\n        if (ContentChangeLocation.is(location)) {\n            start = { ...start, character: start.character + location.context.text.length };\n        }\n        return {\n            selection: Range.create(start, start)\n        } as EditorOpenerOptions;\n    }\n\n    private async debug(message: string | (() => string)): Promise<void> {\n        this.logger.debug(typeof message === 'string' ? message : message());\n    }\n\n    private get stackDump(): string {\n        return `----- Navigation location stack [${new Date()}] -----\nPointer: ${this.pointer}\n${this.stack.map((location, i) => `${i}: ${JSON.stringify(NavigationLocation.toObject(location))}`).join('\\n')}\n----- o -----`;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { NavigationLocation } from './navigation-location';\n\n/**\n * Service for checking whether two navigation locations are similar or not.\n */\n@injectable()\nexport class NavigationLocationSimilarity {\n\n    /**\n     * The number of lines to move in the editor to justify for new state.\n     */\n    private static EDITOR_SELECTION_THRESHOLD = 10;\n\n    /**\n     * `true` if the `left` and `right` locations are withing +- 10 lines in the same editor. Otherwise, `false`.\n     */\n    similar(left: NavigationLocation | undefined, right: NavigationLocation | undefined): boolean {\n        if (left === undefined || right === undefined) {\n            return left === right;\n        }\n\n        if (left.uri.toString() !== right.uri.toString()) {\n            return false;\n        }\n\n        const leftRange = NavigationLocation.range(left);\n        const rightRange = NavigationLocation.range(right);\n        if (leftRange === undefined || rightRange === undefined) {\n            return leftRange === rightRange;\n        }\n\n        const leftLineNumber = Math.min(leftRange.start.line, leftRange.end.line);\n        const rightLineNumber = Math.min(rightRange.start.line, rightRange.end.line);\n        return Math.abs(leftLineNumber - rightLineNumber) < this.getThreshold();\n    }\n\n    protected getThreshold(): number {\n        return NavigationLocationSimilarity.EDITOR_SELECTION_THRESHOLD;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { NavigationLocation, ContentChangeLocation, CursorLocation, SelectionLocation, Position, Range } from './navigation-location';\n\n/**\n * A navigation location updater that is responsible for adapting editor navigation locations.\n *\n * 1. Inserting or deleting text before the position shifts the position accordingly.\n * 2. Inserting text at the position offset shifts the position accordingly.\n * 3. Inserting or deleting text strictly contained by the position shrinks or stretches the position.\n * 4. Inserting or deleting text after a position does not affect the position.\n * 5. Deleting text which strictly contains the position deletes the position.\n * Note that the position is not deleted if its only shrunken to length zero. To delete a position, the modification must delete from\n * strictly before to strictly after the position.\n * 6. Replacing text contained by the position shrinks or expands the position (but does not shift it), such that the final position\n * contains the original position and the replacing text.\n * 7. Replacing text overlapping the position in other ways is considered as a sequence of first deleting the replaced text and\n * afterwards inserting the new text. Thus, a position is shrunken and can then be shifted (if the replaced text overlaps the offset of the position).\n */\n@injectable()\nexport class NavigationLocationUpdater {\n\n    /**\n     * Checks whether `candidateLocation` has to be updated when applying `other`.\n     *  - `false` if the `other` does not affect the `candidateLocation`.\n     *  - A `NavigationLocation` object if the `candidateLocation` has to be replaced with the return value.\n     *  - `undefined` if the candidate has to be deleted.\n     *\n     * If the `otherLocation` is not a `ContentChangeLocation` or it does not contain any actual content changes, this method returns with `false`\n     */\n    affects(candidateLocation: NavigationLocation, otherLocation: NavigationLocation): false | NavigationLocation | undefined {\n        if (!ContentChangeLocation.is(otherLocation)) {\n            return false;\n        }\n        if (candidateLocation.uri.toString() !== otherLocation.uri.toString()) {\n            return false;\n        }\n\n        const candidate = NavigationLocation.range(candidateLocation);\n        const other = NavigationLocation.range(otherLocation);\n        if (candidate === undefined || other === undefined) {\n            return false;\n        }\n\n        const { uri, type } = candidateLocation;\n        const modification = otherLocation.context.text;\n        const newLineCount = modification.split(/[\\n\\r]/g).length - 1;\n\n        // Spec (1. and 2.)\n        if (other.end.line < candidate.start.line\n            || (other.end.line === candidate.start.line && other.end.character <= candidate.start.character)) {\n\n            // Shortcut for the general case. The user is typing above the candidate range. Nothing to do.\n            if (other.start.line === other.end.line && newLineCount === 0) {\n                return false;\n            }\n\n            const lineDiff = other.start.line - other.end.line + newLineCount;\n            let startCharacter = candidate.start.character;\n            let endCharacter = candidate.end.character;\n\n            if (other.start.line !== other.end.line) {\n                startCharacter = other.start.character + (candidate.start.character - other.end.character) + (modification.length - (modification.lastIndexOf('\\n') + 1));\n                endCharacter = candidate.start.line === candidate.end.line\n                    ? candidate.end.character + startCharacter - candidate.start.character\n                    : candidate.end.character;\n            }\n\n            const context = this.handleBefore(candidateLocation, other, lineDiff, startCharacter, endCharacter);\n            return {\n                uri,\n                type,\n                context\n            };\n        }\n\n        // Spec (3.,  5., and 6.)\n        if (this.contained(other, candidate)) {\n            const endLine = candidate.end.line - other.end.line + candidate.start.line + newLineCount;\n            let endCharacter = candidate.end.character - (other.end.character - other.start.character) + modification.length;\n\n            if (newLineCount > 0) {\n                if (candidate.end.line === other.end.line) {\n                    endCharacter = modification.length - (modification.lastIndexOf('\\n') + 1) + (candidate.end.character - other.end.character);\n                } else {\n                    endCharacter = endCharacter - 1;\n                }\n            }\n\n            const context = this.handleInside(candidateLocation, endLine, endCharacter);\n            return {\n                uri,\n                type,\n                context\n            };\n        }\n\n        // Spec (5.)\n        if (other.start.line === candidate.start.line && other.start.character === candidate.start.character\n            && (other.end.line > candidate.end.line || (other.end.line === candidate.end.line && other.end.character > candidate.end.character))) {\n            return undefined;\n        }\n\n        // Spec (4.)\n        if (candidate.end.line < other.start.line\n            || (candidate.end.line === other.start.line && candidate.end.character < other.end.character)) {\n            return false;\n        }\n\n        return false;\n    }\n\n    protected handleInside(candidate: NavigationLocation, endLine: number, endCharacter: number): NavigationLocation.Context {\n        if (CursorLocation.is(candidate)) {\n            throw new Error('Modifications are not allowed inside a cursor location.');\n        }\n        const { start } = NavigationLocation.range(candidate);\n        const range = {\n            start,\n            end: {\n                line: endLine,\n                character: endCharacter\n            }\n        };\n        if (SelectionLocation.is(candidate)) {\n            return range;\n        }\n        if (ContentChangeLocation.is(candidate)) {\n            const { rangeLength, text } = candidate.context;\n            return {\n                range,\n                rangeLength,\n                text\n            };\n        }\n        throw new Error(`Unexpected navigation location: ${NavigationLocation.toString(candidate)}.`);\n    }\n\n    protected handleBefore(candidate: NavigationLocation, modification: Range, lineDiff: number, startCharacter: number, endCharacter: number): NavigationLocation.Context {\n        let range = NavigationLocation.range(candidate);\n        range = this.shiftLine(range, lineDiff);\n        range = {\n            start: {\n                line: range.start.line,\n                character: startCharacter\n            },\n            end: {\n                line: range.end.line,\n                character: endCharacter\n            }\n        };\n        if (CursorLocation.is(candidate)) {\n            return range.start;\n        }\n        if (SelectionLocation.is(candidate)) {\n            return range;\n        }\n        if (ContentChangeLocation.is(candidate)) {\n            const { rangeLength, text } = candidate.context;\n            return {\n                range,\n                rangeLength,\n                text\n            };\n        }\n        throw new Error(`Unexpected navigation location: ${NavigationLocation.toString(candidate)}.`);\n    }\n\n    protected shiftLine(position: Position, diff: number): Position;\n    protected shiftLine(range: Range, diff: number): Range;\n    protected shiftLine(input: Position | Range, diff: number): Position | Range {\n        if (Position.is(input)) {\n            const { line, character } = input;\n            return {\n                line: line + diff,\n                character\n            };\n        }\n        const { start, end } = input;\n        return {\n            start: this.shiftLine(start, diff),\n            end: this.shiftLine(end, diff)\n        };\n    }\n\n    /**\n     * `true` if `subRange` is strictly contained in the `range`. Otherwise, `false`.\n     */\n    protected contained(subRange: Range, range: Range): boolean {\n        if (subRange.start.line > range.start.line && subRange.end.line < range.end.line) {\n            return true;\n        }\n        if (subRange.start.line < range.start.line || subRange.end.line > range.end.line) {\n            return false;\n        }\n        if (subRange.start.line === range.start.line && subRange.start.character < range.start.character) {\n            return false;\n        }\n        if (subRange.end.line === range.end.line && subRange.end.character > range.end.character) {\n            return false;\n        }\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\nimport { Position, Range, TextDocumentContentChangeDelta } from '../editor';\nexport { Position, Range };\n\nexport namespace NavigationLocation {\n\n    /**\n     * The navigation location type.\n     */\n    export enum Type {\n\n        /**\n         * Cursor position change type.\n         */\n        CURSOR,\n\n        /**\n         * Text selection change type.\n         */\n        SELECTION,\n\n        /**\n         * Content change type.\n         */\n        CONTENT_CHANGE\n\n    }\n\n    /**\n     * The type of the context for the navigation location.\n     */\n    export type Context = Position | Range | TextDocumentContentChangeDelta;\n\n    export namespace Context {\n\n        /**\n         * Returns with the type for the context.\n         */\n        export function getType(context: Context): Type {\n            if (Position.is(context)) {\n                return Type.CURSOR;\n            }\n            if (Range.is(context)) {\n                return Type.SELECTION;\n            }\n            if (TextDocumentContentChangeDelta.is(context)) {\n                return Type.CONTENT_CHANGE;\n            }\n            throw new Error(`Unexpected context for type: ${context}.`);\n        }\n\n    }\n\n}\n\n/**\n * Representation of a navigation location in a text editor.\n */\nexport interface NavigationLocation {\n\n    /**\n     * The URI of the resource opened in the editor.\n     */\n    readonly uri: URI;\n\n    /**\n     * The type of the navigation location.\n     */\n    readonly type: NavigationLocation.Type;\n\n    /**\n     * Context of the navigation location.\n     */\n    readonly context: NavigationLocation.Context;\n\n}\n\nexport namespace NavigationLocation {\n\n    /**\n     * Transforms the location into an object that can be safely serialized.\n     */\n    export function toObject(location: NavigationLocation): object {\n        const { uri, type } = location;\n        const context = (() => {\n            if (CursorLocation.is(location)) {\n                return CursorLocation.toObject(location.context);\n            }\n            if (SelectionLocation.is(location)) {\n                return SelectionLocation.toObject(location.context);\n            }\n            if (ContentChangeLocation.is(location)) {\n                return ContentChangeLocation.toObject(location.context);\n            }\n        })();\n        return {\n            uri: uri.toString(),\n            type,\n            context\n        };\n    }\n\n    /**\n     * Returns with the navigation location object from its serialized counterpart.\n     */\n    export function fromObject(object: Partial<NavigationLocation>): NavigationLocation | undefined {\n        const { uri, type } = object;\n        if (uri !== undefined && type !== undefined && object.context !== undefined) {\n            const context = (() => {\n                switch (type) {\n                    case NavigationLocation.Type.CURSOR: return CursorLocation.fromObject(object.context as Position);\n                    case NavigationLocation.Type.SELECTION: return SelectionLocation.fromObject(object.context as Range);\n                    case NavigationLocation.Type.CONTENT_CHANGE: return ContentChangeLocation.fromObject(object.context as TextDocumentContentChangeDelta);\n                }\n            })();\n            if (context) {\n                return {\n                    uri: toUri(uri),\n                    context,\n                    type\n                };\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns with the context of the location as a `Range`.\n     */\n    export function range(location: NavigationLocation): Range {\n        if (CursorLocation.is(location)) {\n            return Range.create(location.context, location.context);\n        }\n        if (SelectionLocation.is(location)) {\n            return location.context;\n        }\n        if (ContentChangeLocation.is(location)) {\n            return location.context.range;\n        }\n        throw new Error(`Unexpected navigation location: ${location}.`);\n    }\n\n    /**\n     * Creates a new cursor location.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: Position): CursorLocation;\n\n    /**\n     * Creates a new selection location.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: Range): SelectionLocation;\n\n    /**\n     * Creates a new text content change location type.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: TextDocumentContentChangeDelta): ContentChangeLocation;\n\n    /**\n     * Creates a new navigation location object.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: NavigationLocation.Context): NavigationLocation {\n        const type = NavigationLocation.Context.getType(context);\n        return {\n            uri: toUri(uri),\n            type,\n            context\n        };\n    }\n\n    /**\n     * Returns with the human-consumable (JSON) string representation of the location argument.\n     */\n    export function toString(location: NavigationLocation): string {\n        return JSON.stringify(toObject(location));\n    }\n\n    function toUri(arg: URI | { uri: URI } | string): URI {\n        if (arg instanceof URI) {\n            return arg;\n        }\n        if (typeof arg === 'string') {\n            return new URI(arg);\n        }\n        return arg.uri;\n    }\n\n}\n\n/**\n * Navigation location representing the cursor location change.\n */\nexport interface CursorLocation extends NavigationLocation {\n\n    /**\n     * The type is always `cursor`.\n     */\n    readonly type: NavigationLocation.Type.CURSOR;\n\n    /**\n     * The context for the location, that is always a position.\n     */\n    readonly context: Position;\n\n}\n\nexport namespace CursorLocation {\n\n    /**\n     * `true` if the argument is a cursor location. Otherwise, `false`.\n     */\n    export function is(location: NavigationLocation): location is CursorLocation {\n        return location.type === NavigationLocation.Type.CURSOR;\n    }\n\n    /**\n     * Returns with the serialized format of the position argument.\n     */\n    export function toObject(context: Position): object {\n        const { line, character } = context;\n        return {\n            line,\n            character\n        };\n    }\n\n    /**\n     * Returns with the position from its serializable counterpart, or `undefined`.\n     */\n    export function fromObject(object: Partial<Position>): Position | undefined {\n        if (object.line !== undefined && object.character !== undefined) {\n            const { line, character } = object;\n            return {\n                line,\n                character\n            };\n        }\n        return undefined;\n    }\n\n}\n\n/**\n * Representation of a selection location.\n */\nexport interface SelectionLocation extends NavigationLocation {\n\n    /**\n     * The `selection` type.\n     */\n    readonly type: NavigationLocation.Type.SELECTION;\n\n    /**\n     * The context of the selection; a range.\n     */\n    readonly context: Range;\n\n}\n\nexport namespace SelectionLocation {\n\n    /**\n     * `true` if the argument is a selection location.\n     */\n    export function is(location: NavigationLocation): location is SelectionLocation {\n        return location.type === NavigationLocation.Type.SELECTION;\n    }\n\n    /**\n     * Converts the range argument into a serializable object.\n     */\n    export function toObject(context: Range): object {\n        const { start, end } = context;\n        return {\n            start: CursorLocation.toObject(start),\n            end: CursorLocation.toObject(end)\n        };\n    }\n\n    /**\n     * Creates a range object from its serializable counterpart. Returns with `undefined` if the argument cannot be converted into a range.\n     */\n    export function fromObject(object: Partial<Range>): Range | undefined {\n        if (!!object.start && !!object.end) {\n            const start = CursorLocation.fromObject(object.start);\n            const end = CursorLocation.fromObject(object.end);\n            if (start && end) {\n                return {\n                    start,\n                    end\n                };\n            }\n        }\n        return undefined;\n    }\n}\n\n/**\n * Content change location type.\n */\nexport interface ContentChangeLocation extends NavigationLocation {\n\n    /**\n     * The type, that is always `content change`.\n     */\n    readonly type: NavigationLocation.Type.CONTENT_CHANGE;\n\n    /**\n     * A text document content change deltas as the context.\n     */\n    readonly context: TextDocumentContentChangeDelta;\n\n}\n\nexport namespace ContentChangeLocation {\n\n    /**\n     * `true` if the argument is a content change location. Otherwise, `false`.\n     */\n    export function is(location: NavigationLocation): location is ContentChangeLocation {\n        return location.type === NavigationLocation.Type.CONTENT_CHANGE;\n    }\n\n    /**\n     * Returns with a serializable object representing the arguments.\n     */\n    export function toObject(context: TextDocumentContentChangeDelta): object {\n        return {\n            range: SelectionLocation.toObject(context.range),\n            rangeLength: context.rangeLength,\n            text: context.text\n        };\n    }\n\n    /**\n     * Returns with a text document change delta for the argument. `undefined` if the argument cannot be mapped to a content change delta.\n     */\n    export function fromObject(object: Partial<TextDocumentContentChangeDelta>): TextDocumentContentChangeDelta | undefined {\n        if (!!object.range && object.rangeLength !== undefined && object.text !== undefined) {\n            const range = SelectionLocation.fromObject(object.range!);\n            const rangeLength = object.rangeLength;\n            const text = object.text;\n            if (!!range) {\n                return {\n                    range,\n                    rangeLength: rangeLength!,\n                    text: text!\n                };\n            }\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { decode as base64Decode, encode as base64Encode } from 'base64-arraybuffer';\nimport { Position, Range } from 'vscode-languageserver-types';\nimport URI from '@theia/core/lib/common/uri';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { ILanguageClient } from '@theia/languages/lib/browser/language-client-services';\nimport { SemanticHighlightFeature } from '@theia/languages/lib/browser/semantic-highlighting/semantic-highlighting-feature';\nimport { SemanticHighlightingParams } from '@theia/languages/lib/browser/semantic-highlighting/semantic-highlighting-protocol';\n\n/**\n * Service for registering and managing semantic highlighting decorations in the code editors for multiple languages.\n *\n * The current, default implementation does nothing at all, because the unique identifier of the `EditorDecoration` is not\n * exposed via the API. A working example is available as the `MonacoSemanticHighlightingService` from the `@theia/monaco` extension.\n */\n@injectable()\nexport class SemanticHighlightingService implements Disposable {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n    protected readonly scopes: Map<string, string[][]> = new Map();\n\n    /**\n     * Registers the supported highlighting scopes for the given language. Returns with a disposable that will unregister the scopes from this service on `dispose`.\n     * @param languageId the unique identifier of the language.\n     * @param scopes a lookup table of the supported (TextMate) scopes received from the server. Semantic highlighting will be be supported for a language if the `scopes` is empty.\n     */\n    register(languageId: string, scopes: string[][] | undefined): Disposable {\n        if (scopes && scopes.length > 0) {\n            this.logger.info(`Registering scopes for language: ${languageId}.`);\n            if (this.scopes.has(languageId)) {\n                this.logger.warn(`The scopes are already registered for language: ${languageId}.`);\n            }\n            this.scopes.set(languageId, scopes.map(scope => scope.slice(0)));\n            this.logger.info(`The scopes have been successfully registered for ${languageId}.`);\n            const unregister: (id: string) => void = this.unregister.bind(this);\n            return Disposable.create(() => unregister(languageId));\n        }\n        return Disposable.NULL;\n    }\n\n    protected unregister(languageId: string): void {\n        this.logger.info(`Unregistering scopes for language: ${languageId}.`);\n        if (!this.scopes.has(languageId)) {\n            this.logger.warn(`No scopes were registered for language: ${languageId}.`);\n        }\n        this.scopes.delete(languageId);\n        this.logger.info(`The scopes have been successfully unregistered for ${languageId}.`);\n    }\n\n    /**\n     * An array for TextMate scopes for the language.\n     * @param languageId the unique ID of the language.\n     * @param index the index of the TextMate scopes for the language.\n     */\n    protected scopesFor(languageId: string, index: number): string[] {\n        if (index < 0) {\n            throw new Error(`index >= 0. ${index}`);\n        }\n        const scopes = this.scopes.get(languageId);\n        if (!scopes) {\n            throw new Error(`No scopes were registered for language: ${languageId}.`);\n        }\n        if (scopes.length <= index) {\n            throw new Error(`Cannot find scopes by index. Language ID: ${languageId}. Index: ${index}. Scopes: ${scopes}`);\n        }\n        return scopes[index];\n    }\n\n    /**\n     * Decorates the editor with the semantic highlighting scopes.\n     * @param languageId the unique identifier of the language the resource belongs to.\n     * @param uri the URI of the resource to decorate in the editor.\n     * @param ranges the decoration ranges.\n     */\n    async decorate(languageId: string, uri: URI, ranges: SemanticHighlightingRange[]): Promise<void> {\n        // NOOP\n    }\n\n    /**\n     * Disposes the service.\n     */\n    dispose(): void {\n        // NOOP\n    }\n\n}\n\nexport namespace SemanticHighlightingService {\n\n    const LENGTH_SHIFT = 0x0000010;\n    const SCOPE_MASK = 0x000FFFF;\n\n    /**\n     * The bare minimum representation of an individual semantic highlighting token.\n     */\n    export interface Token {\n\n        /**\n         * The offset of the token.\n         */\n        readonly character: number;\n\n        /**\n         * The length of the token.\n         */\n        readonly length: number;\n\n        /**\n         * The unique scope index per language.\n         */\n        readonly scope: number;\n    }\n\n    export namespace Token {\n\n        export function fromArray(tokens: number[]): Token[] {\n            if (tokens.length % 3 !== 0) {\n                throw new Error(`\"Invalid tokens. 'tokens.length % 3 !== 0' Tokens length was: \" + ${tokens.length}.`);\n            }\n            const result: Token[] = [];\n            for (let i = 0; i < tokens.length; i = i + 3) {\n                result.push({\n                    character: tokens[i],\n                    length: tokens[i + 1],\n                    scope: tokens[i + 2]\n                });\n            }\n            return result;\n        }\n\n    }\n\n    /**\n     * Converts the compact, `base64` string token into an array of tokens.\n     */\n    export function decode(tokens: string | undefined): SemanticHighlightingService.Token[] {\n        if (!tokens) {\n            return [];\n        }\n\n        const buffer = base64Decode(tokens);\n        const dataView = new DataView(buffer);\n        const result: SemanticHighlightingService.Token[] = [];\n\n        for (let i = 0; i < buffer.byteLength / Uint32Array.BYTES_PER_ELEMENT; i = i + 2) {\n            const character = dataView.getUint32(i * Uint32Array.BYTES_PER_ELEMENT);\n            const lengthAndScope = dataView.getUint32((i + 1) * Uint32Array.BYTES_PER_ELEMENT);\n            const length = lengthAndScope >>> LENGTH_SHIFT;\n            const scope = lengthAndScope & SCOPE_MASK;\n            result.push({\n                character,\n                length,\n                scope\n            });\n        }\n        return result;\n    }\n\n    /**\n     * Encodes the array of tokens into a compact `base64` string representation.\n     */\n    export function encode(tokens: SemanticHighlightingService.Token[] | undefined): string {\n        if (!tokens || tokens.length === 0) {\n            return '';\n        }\n\n        const buffer = new ArrayBuffer(tokens.length * 2 * Uint32Array.BYTES_PER_ELEMENT);\n        const dataView = new DataView(buffer);\n        let j = 0;\n\n        for (let i = 0; i < tokens.length; i++) {\n            const { character, length, scope } = tokens[i];\n            let lengthAndScope = length;\n            lengthAndScope = lengthAndScope << LENGTH_SHIFT;\n            lengthAndScope |= scope;\n            dataView.setUint32(j++ * Uint32Array.BYTES_PER_ELEMENT, character);\n            dataView.setUint32(j++ * Uint32Array.BYTES_PER_ELEMENT, lengthAndScope);\n        }\n        return base64Encode(buffer);\n    }\n\n    /**\n     * Creates a new text document feature to handle the semantic highlighting capabilities of the protocol.\n     * When the feature gets initialized, it delegates to the semantic highlighting service and registers the TextMate scopes received as part of the server capabilities.\n     * Plus, each time when a notification is received by the client, the semantic highlighting service will be used as the consumer and the highlighting information\n     * will be used to decorate the text editor.\n     */\n    export function createNewFeature(service: SemanticHighlightingService, client: ILanguageClient & Readonly<{ languageId: string }>): SemanticHighlightFeature {\n        const { languageId } = client;\n        const initializeCallback = (id: string, scopes: string[][]): Disposable => service.register(id, scopes);\n        const consumer = (params: SemanticHighlightingParams): void => {\n            const toRanges: (tuple: [number, string | undefined]) => SemanticHighlightingRange[] = tuple => {\n                const [line, tokens] = tuple;\n                if (!tokens) {\n                    return [\n                        {\n                            start: Position.create(line, 0),\n                            end: Position.create(line, 0),\n                        }\n                    ];\n                }\n                return SemanticHighlightingService.decode(tokens).map(token => ({\n                    start: Position.create(line, token.character),\n                    end: Position.create(line, token.character + token.length),\n                    scope: token.scope\n                }));\n            };\n            const ranges = params.lines.map(line => [line.line, line.tokens]).map(toRanges).reduce((acc, current) => acc.concat(current), []);\n            const uri = new URI(params.textDocument.uri);\n            service.decorate(languageId, uri, ranges);\n        };\n        return new SemanticHighlightFeature(client, initializeCallback, consumer);\n    }\n\n}\n\nexport interface SemanticHighlightingRange extends Range {\n    /**\n     * The unique, internal index of the TextMate scope for the range.\n     */\n    readonly scope?: number;\n}\n\nexport { Position, Range };\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './language-client-services';\nexport * from './language-client-factory';\nexport * from './language-client-contribution';\nexport * from './languages-frontend-contribution';\nexport * from './languages-frontend-module';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport { DisposableCollection } from '@theia/core/lib/common/';\nimport {\n    ILanguageClient,\n    TextDocumentFeature,\n    TextDocumentRegistrationOptions,\n    ClientCapabilities,\n    ServerCapabilities,\n    Disposable,\n    DocumentSelector\n} from '../';\nimport { SemanticHighlight, SemanticHighlightingParams } from './semantic-highlighting-protocol';\n\n// NOTE: This module can be removed, or at least can be simplified once the semantic highlighting will become the part of the LSP.\n// https://github.com/Microsoft/vscode-languageserver-node/issues/368\n\nexport class SemanticHighlightFeature extends TextDocumentFeature<TextDocumentRegistrationOptions> {\n\n    protected readonly languageId: string;\n    protected readonly toDispose: DisposableCollection;\n\n    constructor(\n        client: ILanguageClient & Readonly<{ languageId: string }>,\n        protected readonly initializeCallback: SemanticHighlightFeature.SemanticHighlightFeatureInitializeCallback,\n        protected readonly consumer: SemanticHighlightFeature.SemanticHighlightingParamsConsumer) {\n\n        super(client, SemanticHighlight.type);\n        this.languageId = client.languageId;\n        this.toDispose = new DisposableCollection();\n    }\n\n    fillClientCapabilities(capabilities: ClientCapabilities): void {\n        if (!capabilities.textDocument) {\n            capabilities.textDocument = {};\n        }\n        // tslint:disable-next-line:no-any\n        (capabilities.textDocument as any).semanticHighlightingCapabilities = {\n            semanticHighlighting: true\n        };\n    }\n\n    initialize(capabilities: ServerCapabilities, documentSelector: DocumentSelector): void {\n        if (!documentSelector) {\n            return;\n        }\n        const capabilitiesExt: ServerCapabilities & { semanticHighlighting?: { scopes: string[][] | undefined } } = capabilities;\n        if (capabilitiesExt.semanticHighlighting) {\n            const { scopes } = capabilitiesExt.semanticHighlighting;\n            if (scopes && scopes.length > 0) {\n                this.toDispose.push(this.initializeCallback(this.languageId, scopes));\n                const id = v4();\n                this.register(this.messages, {\n                    id,\n                    registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilitiesExt.semanticHighlighting)\n                });\n            }\n        }\n    }\n\n    protected registerLanguageProvider(): Disposable {\n        this._client.onNotification(SemanticHighlight.type, this.consumeSemanticHighlighting.bind(this));\n        return Disposable.create(() => this.toDispose.dispose());\n    }\n\n    protected consumeSemanticHighlighting(params: SemanticHighlightingParams): void {\n        this.consumer(params);\n    }\n\n}\n\nexport namespace SemanticHighlightFeature {\n\n    export interface SemanticHighlightingParamsConsumer {\n\n        /**\n         * Consumes a semantic highlighting notification, received from the language server.\n         */\n        (params: SemanticHighlightingParams): void\n    }\n\n    export interface SemanticHighlightFeatureInitializeCallback {\n\n        /**\n         * Invoked when the connection between the client and the server has been established and the server sends back\n         * a \"lookup table\" of TextMate scopes.\n         */\n        (languageId: string, scopes: string[][]): Disposable\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { NotificationType } from 'vscode-jsonrpc';\nimport { VersionedTextDocumentIdentifier } from '..';\n\n// NOTE: This module can be removed, once the semantic highlighting will become the part of the LSP.\n// https://github.com/Microsoft/vscode-languageserver-node/issues/368\n\nexport interface SemanticHighlightingParams {\n    readonly textDocument: VersionedTextDocumentIdentifier;\n    readonly lines: SemanticHighlightingInformation[];\n}\n\nexport interface SemanticHighlightingInformation {\n    readonly line: number;\n    readonly tokens?: string;\n}\n\nexport namespace SemanticHighlight {\n    export const type = new NotificationType<SemanticHighlightingParams, void>('textDocument/semanticHighlighting');\n}\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n"],"sourceRoot":""}